(function(o,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],d):(o=typeof globalThis<"u"?globalThis:o||self,d(o.VueTheMask={},o.Vue))})(this,(function(o,d){"use strict";const c={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:e=>e.toLocaleUpperCase()},a:{pattern:/[a-zA-Z]/,transform:e=>e.toLocaleLowerCase()},"!":{escape:!0}};function g(e,t,n=!0,a){e=e||"",t=t||"";for(var i=0,s=0,r="";i<t.length&&s<e.length;){var u=t[i],f=a[u],l=e[s];f&&!f.escape?(f.pattern.test(l)&&(r+=f.transform?f.transform(l):l,i++),s++):(f&&f.escape&&(i++,u=t[i]),n&&(r+=u),l===u&&s++,i++)}for(var m="";i<t.length&&n;){var u=t[i];if(a[u]){m="";break}m+=u,i++}return r+m}function _(e,t,n){return t=t.sort((a,i)=>a.length-i.length),function(a,i,s=!0){for(var r=0;r<t.length;){var u=t[r];r++;var f=t[r];if(!(f&&e(a,f,!0,n).length>u.length))return e(a,u,s,n)}return""}}function p(e,t,n=!0,a){return Array.isArray(t)?_(g,t,a)(e,t,n,a):g(e,t,n,a)}function y(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function h(e,t){var n=t.value;if((Array.isArray(n)||typeof n=="string")&&(n={mask:n,tokens:c}),e.tagName.toLocaleUpperCase()!=="INPUT"){var a=e.getElementsByTagName("input");if(a.length!==1)throw new Error("v-mask directive requires 1 input, found "+a.length);e=a[0]}e.oninput=function(s){if(s.isTrusted){var r=e.selectionEnd,u=e.value[r-1];for(e.value=p(e.value,n.mask,!0,n.tokens);r<e.value.length&&e.value.charAt(r-1)!==u;)r++;e===document.activeElement&&(e.setSelectionRange(r,r),setTimeout(function(){e.setSelectionRange(r,r)},0)),e.dispatchEvent(y("input"))}};var i=p(e.value,n.mask,!0,n.tokens);i!==e.value&&(e.value=i,e.dispatchEvent(y("input")))}const T=(e,t)=>{const n=e.__vccOpts||e;for(const[a,i]of t)n[a]=i;return n},A={name:"TheMask",emits:["update:modelValue"],props:{modelValue:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:()=>c}},directives:{mask:h},data(){return{lastValue:null,display:this.modelValue}},watch:{modelValue(e){e!==this.lastValue&&(this.display=e)},masked(){this.refresh(this.display)}},computed:{config(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput(e){e.isTrusted||this.refresh(e.target.value)},refresh(t){this.display=t;var t=p(t,this.mask,this.masked,this.tokens);t!==this.lastValue&&(this.lastValue=t,this.$emit("update:modelValue",t))}}},k=["value"];function E(e,t,n,a,i,s){const r=d.resolveDirective("mask");return d.withDirectives((d.openBlock(),d.createElementBlock("input",{type:"text",value:i.display,onInput:t[0]||(t[0]=(...u)=>s.onInput&&s.onInput(...u))},null,40,k)),[[r,s.config]])}const v=T(A,[["render",E]]),w=e=>{e.component(v.name,v),e.directive("mask",h)};typeof window<"u"&&window.Vue&&window.Vue.use(w),o.TheMask=v,o.default=w,o.mask=h,o.tokens=c,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
